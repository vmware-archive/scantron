#!/bin/bash

set -eux

go get github.com/jteeuwen/go-bindata/...

rm data/* || true # file grows on each run
rm proc_scan.go || true
rm scantron || true

GOOS=linux GOARCH=amd64 go build -o data/proc_scan_linux ./cmd/proc_scan
GOOS=windows GOARCH=amd64 go build -o data/proc_scan_windows ./cmd/proc_scan

$GOPATH/bin/go-bindata -o proc_scan.go -pkg scantron data

GOOS=linux GOARCH=amd64 go build -o scantron ./cmd/scantron
